<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IVALab Python Libraries: frameTransformer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">IVALab Python Libraries
   </div>
   <div id="projectbrief">Collection of code for computer vision and robotics with specific API.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceSurveillance.html">Surveillance</a></li><li class="navelem"><a class="el" href="namespaceSurveillance_1_1utils.html">utils</a></li><li class="navelem"><a class="el" href="namespaceSurveillance_1_1utils_1_1transform.html">transform</a></li><li class="navelem"><a class="el" href="classSurveillance_1_1utils_1_1transform_1_1frameTransformer.html">frameTransformer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classSurveillance_1_1utils_1_1transform_1_1frameTransformer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">frameTransformer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac9b73787395eeec8c4ee9d07f0baa61f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSurveillance_1_1utils_1_1transform_1_1frameTransformer.html#ac9b73787395eeec8c4ee9d07f0baa61f">__init__</a> (self, M_intrinsic=None, <a class="el" href="classSurveillance_1_1utils_1_1transform_1_1frameTransformer.html#a7c7c11023a7c19137453a86502d6ec27">M_WtoC</a>=None, <a class="el" href="classSurveillance_1_1utils_1_1transform_1_1frameTransformer.html#a9a2fcd10c842b7ea4f70454960db6a3a">M_WtoR</a>=None, <a class="el" href="classSurveillance_1_1utils_1_1transform_1_1frameTransformer.html#a3190a2fa77e1caab20b4d2feba26afeb">M_BEV</a>=None)</td></tr>
<tr class="separator:ac9b73787395eeec8c4ee9d07f0baa61f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0278f74e7c51cadb10507dbd45262f94"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSurveillance_1_1utils_1_1transform_1_1frameTransformer.html#a0278f74e7c51cadb10507dbd45262f94">parseDepth</a> (self, depth_map)</td></tr>
<tr class="separator:a0278f74e7c51cadb10507dbd45262f94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a790f3b7691237c2621744e477c6733c5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSurveillance_1_1utils_1_1transform_1_1frameTransformer.html#a790f3b7691237c2621744e477c6733c5">parsePBEV</a> (self, coords, deps=None)</td></tr>
<tr class="separator:a790f3b7691237c2621744e477c6733c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a339718f0a61188ced460a2aecfc186fa"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSurveillance_1_1utils_1_1transform_1_1frameTransformer.html#a339718f0a61188ced460a2aecfc186fa">parsePCam</a> (self)</td></tr>
<tr class="separator:a339718f0a61188ced460a2aecfc186fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac64bca68655166739ce7c34da8d04122"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSurveillance_1_1utils_1_1transform_1_1frameTransformer.html#ac64bca68655166739ce7c34da8d04122">parsePImg</a> (self, coords, deps)</td></tr>
<tr class="separator:ac64bca68655166739ce7c34da8d04122"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee8400cfb29cd9dfbd5caef732bb3fa1"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSurveillance_1_1utils_1_1transform_1_1frameTransformer.html#aee8400cfb29cd9dfbd5caef732bb3fa1">parsePRob</a> (self, robot_coords)</td></tr>
<tr class="separator:aee8400cfb29cd9dfbd5caef732bb3fa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a3190a2fa77e1caab20b4d2feba26afeb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSurveillance_1_1utils_1_1transform_1_1frameTransformer.html#a3190a2fa77e1caab20b4d2feba26afeb">M_BEV</a></td></tr>
<tr class="separator:a3190a2fa77e1caab20b4d2feba26afeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad31de1cf2df4249c634663229eee71de"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSurveillance_1_1utils_1_1transform_1_1frameTransformer.html#ad31de1cf2df4249c634663229eee71de">M_int</a></td></tr>
<tr class="separator:ad31de1cf2df4249c634663229eee71de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c7c11023a7c19137453a86502d6ec27"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSurveillance_1_1utils_1_1transform_1_1frameTransformer.html#a7c7c11023a7c19137453a86502d6ec27">M_WtoC</a></td></tr>
<tr class="separator:a7c7c11023a7c19137453a86502d6ec27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a2fcd10c842b7ea4f70454960db6a3a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSurveillance_1_1utils_1_1transform_1_1frameTransformer.html#a9a2fcd10c842b7ea4f70454960db6a3a">M_WtoR</a></td></tr>
<tr class="separator:a9a2fcd10c842b7ea4f70454960db6a3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">In a world composed of a depth camera, robot, and a defined world frame, 
the frameTransformer handels the transformation between the image frame, camera frame, tabletop frame, and the robot frame.
The image and camera frame follow the OpenCV definition

The transformation matrix required to complish the task:
1. M_intrinsic: The camera intrinsic matrix, which is the camera-to-image transformation (double direction). P_I = M_int * P_C
2. M_WtoC: The world-to-camera transformation. One example is using the Aruco tag. P_C = M_WtoC * P_W
3. M_WtoR: The world-to-robot transformation. P_R = M_WtoR * P_W
4. M_BEV: The image-to-BEV transformation.  P_BEV = M_BEV * P_I

Args:
    M_intrinsic ((3,3)): The 3-by-3 intrinsic matrix
    M_WtoC ((4, 4)): The 4-by-4 homogeneous camera-to-world intrinsic matrix
    M_WtoR ((4, 4)): The 4-by-4 homogeneous world-to-robot intrinsic matrix
    BEV_mat ((3, 3)): The Bird-eye-view transformation matrix
</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac9b73787395eeec8c4ee9d07f0baa61f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9b73787395eeec8c4ee9d07f0baa61f">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>M_intrinsic</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>M_WtoC</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>M_WtoR</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>M_BEV</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a0278f74e7c51cadb10507dbd45262f94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0278f74e7c51cadb10507dbd45262f94">&#9670;&nbsp;</a></span>parseDepth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parseDepth </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>depth_map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Parse all the pixel coordinates from a depth map

Args:
    depth_map ((H, W)): The depth map
Returns:
    pC_map  ((H, W, 3)): The camera frame coordinate
    pW_map  ((H, W, 3)): The world frame coordinate
    pR_map  ((H, W, 3)): The robot frame coordinate
</pre> 
</div>
</div>
<a id="a790f3b7691237c2621744e477c6733c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a790f3b7691237c2621744e477c6733c5">&#9670;&nbsp;</a></span>parsePBEV()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parsePBEV </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>coords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>deps</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Parse the Bird-eye-view(BEV) coordinates

Args:
    coords ((N, 2)):        The BEV coordinates 
    deps ((N,), optional):  The deps at the corresponding locations
Returns
    p_I ((N, 2)):           The image frame coordinates
    p_C [(N, 3)]:           The camera frame coordinates (x, y, z)
    p_W [(N, 3)]:           The world frame coordinates (x, y, z)
    p_R [(N, 3)]:           The robot frame coordinates (x, y, z)
</pre> 
</div>
</div>
<a id="a339718f0a61188ced460a2aecfc186fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a339718f0a61188ced460a2aecfc186fa">&#9670;&nbsp;</a></span>parsePCam()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parsePCam </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac64bca68655166739ce7c34da8d04122"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac64bca68655166739ce7c34da8d04122">&#9670;&nbsp;</a></span>parsePImg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parsePImg </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>coords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>deps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Parse the image frame coordinate and get the coordinate in camera, world, and robot frame if applicable.
The function requires both the image frame coordinate (u, v) and the depth value w.r.t. the camera.
Without the depth, one image frame point will corresponds to a line in the 3D space

Args:
    coords (np.ndarray, (N, 2)): The (u, v) image frame coordinates. N is the query number
    deps (np.ndarray, (N, )): The depth value cooresponds to the coords

Returns:
    p_C [(N, 3)]: The camera frame coordinates (x, y, z)
    p_W [(N, 3)]: The world frame coordinates (x, y, z)
    p_R [(N, 3)]: The robot frame coordinates (x, y, z)
</pre> 
</div>
</div>
<a id="aee8400cfb29cd9dfbd5caef732bb3fa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee8400cfb29cd9dfbd5caef732bb3fa1">&#9670;&nbsp;</a></span>parsePRob()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parsePRob </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>robot_coords</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Parse the robot frame coordinate and get the coordinate in world, image, and camera frame if applicable.
Args:
    robot_coords (np.ndarray, (N, 3)): The robot frame coordinates. N is the query number

Returns:
    p_W [(N, 3)]: The world frame coordinates (x, y, z)
    p_C [(N, 3)]: The camera frame coordinates (x, y, z)
    p_Img [(N, 2)]: The image frame coordinates (u, v)
</pre> 
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a3190a2fa77e1caab20b4d2feba26afeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3190a2fa77e1caab20b4d2feba26afeb">&#9670;&nbsp;</a></span>M_BEV</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_BEV</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad31de1cf2df4249c634663229eee71de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad31de1cf2df4249c634663229eee71de">&#9670;&nbsp;</a></span>M_int</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_int</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7c7c11023a7c19137453a86502d6ec27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c7c11023a7c19137453a86502d6ec27">&#9670;&nbsp;</a></span>M_WtoC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_WtoC</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9a2fcd10c842b7ea4f70454960db6a3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a2fcd10c842b7ea4f70454960db6a3a">&#9670;&nbsp;</a></span>M_WtoR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_WtoR</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/pvela/python/surveillance/Surveillance/utils/<a class="el" href="transform_8py.html">transform.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
